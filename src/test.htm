<html>
<head>
</head>
<body>
<h1>Hi!</h1>
<span></span>
<script>
    function processNode(node) {
        console.log(node);
        return false;
    }

    const observer = new MutationObserver( records => {
        records.forEach( record => {
            record.addedNodes.forEach( addedNode => {
                addedNode.nodeName !== '#text' && ( processNode(addedNode) || addedNode.querySelectorAll('*').forEach(processNode) );
            });
        });
    });
    observer.observe(document.body, {childList: true, subtree: true});

    setTimeout(() => {
        document.getElementsByTagName('span')[0].innerHTML = '<h1><i>Hi again!</i></h1>';
    }, 500);
</script>
</body>
</html>
